<%- include('partials/header'); -%>
<link rel="stylesheet" type="text/css" href="css/upload.css">

<div class="logoutcontainer">
    <span>Edit Content Here</span>
    <a href="/logout">Logout</a>
</div>


<div class="container workpart">
    <div class="leftpart">
        <form method="POST" action="/upload" enctype="multipart/form-data">
            <div class="fileUpload">
                <input type="file" name="file1" id="file1" required>
                <input type="file" name="file2" id="file2" required>
                <input type="file" name="file3" id="file3" required>
                <input type="file" name="file4" id="file4" required>
                <input type="text" value="<%= items.length+2 %>" disabled id="slide" name="slide">
                <span>Slide No: <b><%= items.length+2 %></b></span>
                <button class="preview" type="submit">Upload</button>
            </div>
        </form>
        <form method="POST" action="/deleteslide">
            <div class="fileUpload">
                <input type="number" required min="2" max="<%= items.length+1 %>" placeholder="Enter Slide Number" id="delete" name="delete">
                <button class="preview" type="submit">Delete Slide</button>
            </div>
        </form>
        <form method="POST" action="/preview">
            <div class="fileUpload">
                <input type="number" required min="2" max="<%= items.length+1 %>" placeholder="Enter Slide Number" id="preview" name="preview">
                <button class="preview" type="submit">Preview</button>
            </div>
        </form>
    </div>
    <div class="rights">
    <div class="rightpart">
        <div class="gallery-preview">
            <div class="images">
                <div class="gallery-item">
                  <img src="none" />
                  <span class="image-preview-text">Image1</span>
                </div>
                <div class="gallery-item">
                  <img src="none" >
                  <span class="image-preview-text">Image2</span>              
                </div>
                <div class="gallery-item">
                  <img src="none">
                  <span class="image-preview-text">Image3</span>
                </div>
                <div class="gallery-item">
                  <img src="none">
                  <span class="image-preview-text">Image4</span>              
                </div>
              </div>
        </div>
    </div>
    <div class="rightpart" style="display: <%= display %>">
        <div class="gallery-preview">
            <div class="images">
                <div class="gallery-item-2">
                  <img  src="uploads/<%= status[0] %>" />
                </div>
                <div class="gallery-item-2">
                  <img src="uploads/<%= status[1] %>" >             
                </div>
                <div class="gallery-item-2">
                  <img src="uploads/<%= status[2] %>">
                </div>
                <div class="gallery-item-2">
                  <img src="uploads/<%= status[3] %>">              
                </div>
              </div>
        </div>
    </div>
    </div>
</div>

<script>
    const inp1 = document.getElementById('file1');
    const inp2 = document.getElementById('file2');
    const inp3 = document.getElementById('file3');
    const inp4 = document.getElementById('file4');

    const previewContainer = document.querySelectorAll('.gallery-item');
    const previewImg = document.querySelectorAll('.gallery-item img');
    const previewText = document.querySelectorAll('.image-preview-text');

    inp1.addEventListener("change",function(){
        const file = this.files[0];
        if(file){
            const reader = new FileReader();
            previewText[0].style.display = "none";
            previewImg[0].style.display = "block";
            previewContainer[0].style.background = "transparent";

            reader.addEventListener("load",function(){
                previewImg[0].setAttribute("src",this.result);
            });

            reader.readAsDataURL(file);
        }else{
            previewText[0].style.display = "inline";
            previewImg[0].style.display = "none";
            previewContainer[0].style.background = "tomato";
        }
    });

    inp2.addEventListener("change",function(){
        const file = this.files[0];
        if(file){
            const reader = new FileReader();
            previewText[1].style.display = "none";
            previewImg[1].style.display = "block";
            previewContainer[1].style.background = "transparent";

            reader.addEventListener("load",function(){
                previewImg[1].setAttribute("src",this.result);
            });

            reader.readAsDataURL(file);
        }else{
            previewText[1].style.display = "inline";
            previewImg[1].style.display = "none";
            previewContainer[1].style.background = "tomato";
        }
    });

    inp3.addEventListener("change",function(){
        const file = this.files[0];
        if(file){
            const reader = new FileReader();
            previewText[2].style.display = "none";
            previewImg[2].style.display = "block";
            previewContainer[2].style.background = "transparent";

            reader.addEventListener("load",function(){
                previewImg[2].setAttribute("src",this.result);
            });

            reader.readAsDataURL(file);
        }else{
            previewText[2].style.display = "inline";
            previewImg[2].style.display = "none";
            previewContainer[2].style.background = "tomato";
        }
    });

    inp4.addEventListener("change",function(){
        const file = this.files[0];
        if(file){
            const reader = new FileReader();
            previewText[3].style.display = "none";
            previewImg[3].style.display = "block";
            previewContainer[3].style.background = "transparent";

            reader.addEventListener("load",function(){
                previewImg[3].setAttribute("src",this.result);
            });

            reader.readAsDataURL(file);
        }else{
            previewText[3].style.display = "inline";
            previewImg[3].style.display = "none";
            previewContainer[3].style.background = "tomato";
        }
    });
</script>
